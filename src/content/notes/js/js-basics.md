---
title: JavaScript 基本
notebook: js
date: 2024-05-10
tags: ['基础']
excerpt: 理解 作用域、作用域链、闭包、this指向等...
order: 0
---

# 作用域

变量的活动范围，决定了谁可以访问它。

	全局作用域：通常指的是window对象
	函数作用域：变量在函数执行时创建、在执行结束时销毁，除非呗闭包引用，函数外部无法访问。
	块级作用域：在大括号{} if、for、switch 或使用let、const生命的变量，只在该代码块内可见

# 作用域链

作用域链是js引擎查找变量的路径机制，当访问一个变量的时候，会从当前作用域开始，如果找不到会逐层向外查找，直到全局作用域，找不到则报错。

作用域链的结构是在函数定义时就确定的，而不是在调用时，所以变量的查找路径是基于代码的书写结构。

# 闭包

简单说：内部函数保留了对外部函数变量的引用，即使外部函数已经执行完毕。

形象一点可以理解为： 函数带着环境走， 一个函数+它被定义时的作用域，就形成了闭包。它的产生有几个条件：

	1.内部有一个函数 
	2.函数内部引用了外部函数的变量 
	3.内部函数在外部被调用。

闭包会让外部变量不会被垃圾回收，需要注意内存泄漏。

用途：可以让数据私有化、函数柯里化

# this指向

this是函数调用时动态绑定的上下文对象，和定义的位置没关系，只看调用方式。

普通函数看调用，谁调用就指向谁；
箭头函数看定义，继承外层 this；
bind/call/apply 能强行改，new 调用最优先。
